\documentclass{article} % For LaTeX2e
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage[pdftex]{graphicx}
\usepackage{array}
\usepackage[letterpaper, margin=1.in]{geometry}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{float}
\usepackage{amsthm}

\theoremstyle{plain}
\newtheorem{thm}{Theorem}

\theoremstyle{definition}
\newtheorem{assume}[thm]{Assumption}

\renewcommand{\thesubsection}{\thesection.\alph{subsection}}

\newcommand{\pxth}{{p(x|\theta)}}
\newcommand{\pbth}{{p(b|\theta)}}
\newcommand{\pthpsi}{{p(\theta|\psi,\sigma)}}
\newcommand{\pcth}{{p(c|\theta)}}
\newcommand{\E}{{\mathbb{E}}}
\newcommand{\V}{{\mathbb{V}}}
\newcommand{\N}{{\mathcal{N}}}
\newcommand{\dth}[1]{{\frac{\partial {#1}}{\partial\theta}}}
\newcommand{\dx}[1]{{\frac{\partial {#1}}{\partial\theta}}}
\newcommand{\dpsi}[1]{{\frac{\partial {#1}}{\partial\psi}}}
\newcommand{\dxy}[2]{{\frac{\partial {#1}}{\partial #2}}}
\newcommand{\LMC}{{\hat{L}_{\text{MC}}}}
\newcommand{\SD}{{\sum_{d=1}^D}}
\newcommand{\ST}{{\sum_{t=1}^T}}
\newcommand{\gSF}{{\hat{g}^{\text{SF}}}}
\newcommand{\gRP}{{\hat{g}^{\text{REPARAM}}}}
\newcommand{\gES}{{\hat{g}^{\text{ES}}}}
\newcommand{\gRE}{{\hat{g}^{\text{REBAR}}}}
\newcommand{\gSG}{{\hat{g}^{\text{SGD}}}}
\newcommand{\gMO}{{\hat{g}^{\text{Mom}}}}
\newcommand{\LMO}{{\hat{L}^{\text{Mom}}}}
\newcommand{\fth}[1]{{f(#1|\theta)}}
\newcommand{\fpth}[1]{{f' (#1|\theta)}}
\newcommand{\tz}{{\tilde{z}}}
\newcommand{\Exp}[1]{{\exp\left \{ {#1} \right \}}}

\begin{document}

SGD:

\begin{align}
    g_t = \gSG_t &= \left.\dth{}\E[L(\theta)]\right|_{\theta=\theta_t}
\end{align}

SGD with momentum:

\begin{align}
    \gMO_t
    &= \beta \gMO_{t-1}+(1-\beta) g_t\\
    &= \ST (1-\beta) \beta^{T-t} g_t\\
    \left. \dth{\LMO} \right|_{\theta=\theta_t}&= \gMO_t\\
    \LMO
    &= \int \ST (1-\beta) \beta^{T-t} g_t d\theta\\
    &= (1-\beta)\ST \beta^{T-t} \int g_t d\theta\\
    &= (1-\beta)\ST \beta^{T-t} \E[L(\theta_t)]
\end{align}

SGD with momentum is minimizing an exponential average of the loss of the 
model. So it is stabilizing learning.
\end{document}
